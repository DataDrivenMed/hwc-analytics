<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>2025 Women & Children Health Analytics | DataDrivenMed</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:opsz,wght@9..40,300;9..40,400;9..40,500;9..40,600;9..40,700&family=DM+Serif+Display&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#eef1f7;--surface:#ffffff;--surface-2:#f4f6fc;--surface-3:#eaecf5;
  --border:#dde2ef;--border-mid:#c9d1e6;
  --navy:#0d2b52;--navy-mid:#1a4480;--navy-light:#2563a8;
  --teal:#0b7285;--teal-light:#e0f4f7;--teal-mid:#0e8fa3;
  --green:#1a7f5a;--green-light:#dcf5ec;
  --amber:#92400e;--amber-mid:#d97706;--amber-light:#fef3c7;
  --red:#991b1b;--red-mid:#dc2626;--red-light:#fee2e2;
  --blue:#1e40af;--blue-mid:#2563eb;--blue-light:#dbeafe;
  --text-1:#0d1b2a;--text-2:#374151;--text-3:#6b7280;--text-4:#9ca3af;
  --shadow-xs:0 1px 2px rgba(0,0,0,.06);
  --shadow-sm:0 2px 6px rgba(0,0,0,.07),0 1px 2px rgba(0,0,0,.04);
  --shadow-md:0 4px 14px rgba(0,0,0,.08),0 2px 4px rgba(0,0,0,.04);
  --shadow-lg:0 10px 30px rgba(0,0,0,.10),0 4px 8px rgba(0,0,0,.05);
  --r:14px;--rs:8px;--rxs:5px;
}
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0;}
body{background:var(--bg);color:var(--text-1);font-family:'DM Sans',system-ui,sans-serif;font-size:14px;line-height:1.6;min-height:100vh;}
::-webkit-scrollbar{width:6px;height:6px;}
::-webkit-scrollbar-track{background:var(--bg);}
::-webkit-scrollbar-thumb{background:var(--border-mid);border-radius:3px;}

/* â”€â”€ Header â”€â”€ */
.site-header{background:var(--navy);padding:0 28px;height:62px;display:flex;align-items:center;justify-content:space-between;box-shadow:0 2px 12px rgba(0,0,0,.22);position:sticky;top:0;z-index:100;}
.logo{display:flex;align-items:center;gap:12px;}
.logo-mark{width:38px;height:38px;background:linear-gradient(135deg,#1ea8c0,#0b7285);border-radius:10px;display:flex;align-items:center;justify-content:center;font-family:'DM Serif Display',serif;font-size:15px;color:#fff;box-shadow:0 3px 8px rgba(0,0,0,.25);}
.logo-text{color:#fff;font-weight:600;font-size:15px;}
.logo-sub{color:rgba(255,255,255,.45);font-size:11px;margin-top:1px;}
.header-right{display:flex;align-items:center;gap:12px;}
.header-badge{background:rgba(255,255,255,.10);border:1px solid rgba(255,255,255,.20);color:rgba(255,255,255,.80);padding:5px 14px;border-radius:20px;font-size:11px;font-weight:500;letter-spacing:.4px;}
.header-source{color:rgba(255,255,255,.35);font-size:11px;}

/* â”€â”€ Nav â”€â”€ */
.nav-tabs{background:var(--surface);border-bottom:2px solid var(--border);padding:0 28px;display:flex;overflow-x:auto;box-shadow:var(--shadow-xs);}
.nav-tab{padding:15px 20px;font-size:12.5px;font-weight:500;color:var(--text-3);cursor:pointer;border-bottom:2px solid transparent;margin-bottom:-2px;white-space:nowrap;transition:color .15s,border-color .15s;}
.nav-tab:hover{color:var(--text-2);}
.nav-tab.active{color:var(--navy);border-bottom-color:var(--teal);font-weight:600;}

/* â”€â”€ Pages â”€â”€ */
.page{display:none;padding:28px;max-width:1600px;margin:0 auto;}
.page.active{display:block;animation:fadeUp .3s ease both;}
@keyframes fadeUp{from{opacity:0;transform:translateY(10px);}to{opacity:1;transform:translateY(0);}}

/* â”€â”€ Grids â”€â”€ */
.grid-2{display:grid;grid-template-columns:1fr 1fr;gap:16px;}
.grid-3{display:grid;grid-template-columns:1fr 1fr 1fr;gap:16px;}
.grid-4{display:grid;grid-template-columns:repeat(4,1fr);gap:16px;}
.grid-5{display:grid;grid-template-columns:repeat(5,1fr);gap:14px;}
@media(max-width:1300px){.grid-5{grid-template-columns:repeat(3,1fr);}}
@media(max-width:1100px){.grid-4{grid-template-columns:1fr 1fr;}}
@media(max-width:900px){.grid-3,.grid-2{grid-template-columns:1fr;}}

/* â”€â”€ Cards â”€â”€ */
.card{background:var(--surface);border-radius:var(--r);padding:20px;box-shadow:var(--shadow-md);border:1px solid var(--border);position:relative;overflow:hidden;}
.card-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:14px;padding-bottom:12px;border-bottom:1px solid var(--border);}
.card-title{font-size:11px;font-weight:700;color:var(--text-3);text-transform:uppercase;letter-spacing:.8px;}
.card-badge{font-size:10px;padding:3px 8px;border-radius:var(--rxs);background:var(--teal-light);color:var(--teal);font-weight:600;}

/* â”€â”€ Section header â”€â”€ */
.section-header{display:flex;align-items:flex-end;justify-content:space-between;margin-bottom:22px;padding-bottom:14px;border-bottom:2px solid var(--border);}
.section-title{font-family:'DM Serif Display',serif;font-size:24px;color:var(--navy);line-height:1.2;}
.section-subtitle{color:var(--text-3);font-size:13px;margin-top:4px;}
.section-tag{font-size:11px;color:var(--text-4);font-weight:600;letter-spacing:.5px;background:var(--surface-2);border:1px solid var(--border);padding:5px 12px;border-radius:6px;white-space:nowrap;}

/* â”€â”€ Score explainer box â”€â”€ */
.score-explainer{background:linear-gradient(135deg,#f0f7ff,#e8f4f8);border:1px solid #c5dff0;border-radius:var(--rs);padding:14px 18px;margin-bottom:18px;display:flex;align-items:flex-start;gap:12px;}
.score-explainer .icon{font-size:20px;flex-shrink:0;margin-top:1px;}
.score-explainer-text{font-size:12.5px;color:var(--text-2);line-height:1.55;}
.score-explainer-text strong{color:var(--navy);}
.score-scale{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px;}
.scale-chip{font-size:11px;font-weight:600;padding:2px 9px;border-radius:12px;}
.sc-great{background:var(--green-light);color:var(--green);}
.sc-good{background:var(--blue-light);color:var(--blue);}
.sc-avg{background:#f0f0f0;color:#555;}
.sc-poor{background:var(--amber-light);color:var(--amber);}
.sc-bad{background:var(--red-light);color:var(--red-mid);}

/* â”€â”€ KPI Cards â”€â”€ */
.kpi-card{background:var(--surface);border-radius:var(--r);padding:18px 16px 16px;box-shadow:var(--shadow-md);border:1px solid var(--border);position:relative;overflow:hidden;transition:transform .15s,box-shadow .15s;}
.kpi-card:hover{transform:translateY(-2px);box-shadow:var(--shadow-lg);}
.kpi-card::before{content:'';position:absolute;top:0;left:0;right:0;height:4px;border-radius:var(--r) var(--r) 0 0;}
.kpi-teal::before{background:linear-gradient(90deg,var(--teal),var(--teal-mid));}
.kpi-green::before{background:linear-gradient(90deg,var(--green),#34d399);}
.kpi-blue::before{background:linear-gradient(90deg,var(--blue),var(--blue-mid));}
.kpi-amber::before{background:linear-gradient(90deg,var(--amber-mid),#fbbf24);}
.kpi-red::before{background:linear-gradient(90deg,var(--red-mid),#f87171);}
.kpi-label{font-size:10px;font-weight:700;color:var(--text-4);text-transform:uppercase;letter-spacing:.9px;margin-bottom:10px;margin-top:2px;}
.kpi-value{font-family:'DM Serif Display',serif;font-size:38px;line-height:1;margin-bottom:4px;}
.kpi-teal .kpi-value{color:var(--teal);}
.kpi-green .kpi-value{color:var(--green);}
.kpi-blue .kpi-value{color:var(--blue);}
.kpi-amber .kpi-value{color:var(--amber-mid);}
.kpi-red .kpi-value{color:var(--red-mid);}
.kpi-sub{font-size:12.5px;color:var(--text-2);margin-bottom:8px;}
.kpi-delta{display:inline-flex;align-items:center;gap:4px;font-size:11px;font-weight:600;padding:3px 8px;border-radius:var(--rxs);}
.d-pos{background:var(--green-light);color:var(--green);}
.d-neg{background:var(--red-light);color:var(--red-mid);}
.d-neu{background:var(--blue-light);color:var(--blue);}
.d-warn{background:var(--amber-light);color:var(--amber);}

/* â”€â”€ LA strip â”€â”€ */
.la-strip{background:linear-gradient(130deg,var(--navy) 0%,var(--navy-mid) 100%);border-radius:var(--r);padding:20px 24px;margin-bottom:20px;display:flex;align-items:center;justify-content:space-between;gap:20px;flex-wrap:wrap;box-shadow:var(--shadow-lg);}
.la-info{flex:1;min-width:200px;}
.la-sup{color:rgba(255,255,255,.5);font-size:10px;font-weight:700;text-transform:uppercase;letter-spacing:1px;}
.la-title{color:#fff;font-family:'DM Serif Display',serif;font-size:20px;margin-top:3px;}
.la-sub{color:rgba(255,255,255,.55);font-size:12px;margin-top:4px;}
.la-stats{display:flex;gap:22px;flex-wrap:wrap;}
.la-stat{text-align:center;}
.la-stat-num{font-family:'DM Serif Display',serif;font-size:28px;line-height:1;}
.la-stat-num.good{color:#34d399;}
.la-stat-num.bad{color:#fca5a5;}
.la-stat-label{color:rgba(255,255,255,.5);font-size:10px;margin-top:3px;}
.la-rank{text-align:center;border-left:1px solid rgba(255,255,255,.12);padding-left:22px;}
.la-rank-num{font-family:'DM Serif Display',serif;font-size:52px;line-height:1;color:#fca5a5;}
.la-rank-label{color:rgba(255,255,255,.4);font-size:10px;letter-spacing:.5px;}

/* â”€â”€ Rank badges â”€â”€ */
.rank-badge{display:inline-flex;align-items:center;justify-content:center;width:30px;height:30px;border-radius:var(--rs);font-size:11px;font-weight:700;}
.r-top{background:var(--green-light);color:var(--green);}
.r-mid{background:var(--blue-light);color:var(--blue);}
.r-low{background:var(--amber-light);color:var(--amber);}
.r-bot{background:var(--red-light);color:var(--red-mid);}

/* â”€â”€ Tables â”€â”€ */
.data-table{width:100%;border-collapse:collapse;}
.data-table th{text-align:left;padding:9px 12px;font-size:10px;font-weight:700;color:var(--text-4);text-transform:uppercase;letter-spacing:.8px;background:var(--surface-2);border-bottom:2px solid var(--border);}
.data-table td{padding:10px 12px;border-bottom:1px solid #f0f3f9;font-size:13px;}
.data-table tr:last-child td{border-bottom:none;}
.data-table tr:hover td{background:#f5f8ff;}
.score-pos{color:var(--green);font-weight:600;}
.score-neg{color:var(--red-mid);font-weight:600;}
.score-neu{color:var(--blue);font-weight:600;}

/* â”€â”€ Filters â”€â”€ */
.filter-bar{display:flex;align-items:center;gap:12px;flex-wrap:wrap;margin-bottom:20px;padding:14px 16px;background:var(--surface);border:1px solid var(--border);border-radius:var(--rs);box-shadow:var(--shadow-xs);}
.filter-label{font-size:11px;font-weight:700;color:var(--text-3);text-transform:uppercase;letter-spacing:.6px;white-space:nowrap;}
select,input[type="text"]{background:var(--surface-2);border:1px solid var(--border-mid);color:var(--text-1);padding:7px 12px;border-radius:var(--rxs);font-family:'DM Sans',sans-serif;font-size:13px;outline:none;transition:border-color .15s,box-shadow .15s;cursor:pointer;}
select:focus,input:focus{border-color:var(--teal);box-shadow:0 0 0 3px rgba(11,114,133,.12);}

/* â”€â”€ Bar rows â”€â”€ */
.bar-row{display:flex;align-items:center;gap:10px;margin-bottom:10px;}
.bar-label{width:200px;font-size:12px;color:var(--text-2);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex-shrink:0;}
.bar-track{flex:1;height:8px;background:var(--surface-3);border-radius:4px;overflow:hidden;}
.bar-fill{height:100%;border-radius:4px;}
.bar-val{width:56px;text-align:right;font-size:12px;font-weight:600;color:var(--text-2);}
.bar-rank{width:28px;text-align:right;font-size:10px;color:var(--text-4);}

/* â”€â”€ State map â”€â”€ */
.state-grid{display:grid;grid-template-columns:repeat(10,1fr);gap:4px;}
.state-cell{aspect-ratio:1;border-radius:var(--rxs);display:flex;align-items:center;justify-content:center;font-size:9px;font-weight:700;cursor:pointer;transition:transform .12s,box-shadow .12s;border:1px solid rgba(0,0,0,.06);}
.state-cell:hover{transform:scale(1.18);z-index:10;box-shadow:var(--shadow-md);}

/* â”€â”€ Insight pills â”€â”€ */
.insight-pill{display:inline-flex;align-items:center;gap:5px;padding:5px 11px;border-radius:20px;font-size:11.5px;font-weight:500;margin:3px;cursor:default;}
.pill-critical{background:var(--red-light);border:1px solid rgba(220,38,38,.25);color:var(--red);}
.pill-warning{background:var(--amber-light);border:1px solid rgba(217,119,6,.25);color:var(--amber);}
.pill-positive{background:var(--green-light);border:1px solid rgba(26,127,90,.25);color:var(--green);}

/* â”€â”€ Quadrant â”€â”€ */
.quadrant-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px;}
.quadrant{border-radius:var(--rs);padding:16px;border:1px solid;}
.q-maintain{background:#f0faf6;border-color:rgba(26,127,90,.25);}
.q-leverage{background:#eff6ff;border-color:rgba(30,64,175,.20);}
.q-monitor{background:#fffbeb;border-color:rgba(217,119,6,.25);}
.q-intervene{background:#fef2f2;border-color:rgba(220,38,38,.25);}
.q-label{font-size:13px;font-weight:700;margin-bottom:4px;}
.q-sub{font-size:11px;color:var(--text-3);margin-bottom:8px;}
.q-items{list-style:none;font-size:12px;color:var(--text-2);}
.q-items li{padding:3px 0;border-bottom:1px solid rgba(0,0,0,.05);}
.q-items li:last-child{border:none;}

/* â”€â”€ Misc utils â”€â”€ */
.unit-tag{font-size:10px;color:var(--text-4);font-weight:600;background:var(--surface-2);border:1px solid var(--border);padding:3px 8px;border-radius:var(--rxs);}
.mb-4{margin-bottom:16px;}.mb-6{margin-bottom:22px;}.mt-2{margin-top:8px;}.mt-4{margin-top:16px;}
.flex{display:flex;}.items-center{align-items:center;}.justify-between{justify-content:space-between;}
.gap-2{gap:8px;}.gap-3{gap:12px;}
.text-sm{font-size:12.5px;}.text-xs{font-size:11px;}
.text-muted{color:var(--text-3);}.text-secondary{color:var(--text-2);}
.col-span-2{grid-column:span 2;}
</style>
</head>
<body>

<!-- HEADER -->
<header class="site-header">
  <div class="logo">
    <div class="logo-mark">HW</div>
    <div>
      <div class="logo-text">HealthAnalytics 2025</div>
      <div class="logo-sub">America's Health Rankings â€” Women & Children</div>
    </div>
  </div>
  <div class="header-right">
    <span class="header-source">Source: United Health Foundation</span>
    <div class="header-badge">2025 HWC REPORT Â· ALL 50 STATES</div>
  </div>
</header>

<!-- NAV -->
<nav class="nav-tabs">
  <div class="nav-tab active" onclick="showPage('overview',this)">â—ˆ Overview</div>
  <div class="nav-tab" onclick="showPage('rankings',this)">â†• State Rankings</div>
  <div class="nav-tab" onclick="showPage('indicators',this)">â¬¡ Key Indicators</div>
  <div class="nav-tab" onclick="showPage('equity',this)">â—Ž Equity Analysis</div>
  <div class="nav-tab" onclick="showPage('spotlight',this)">â˜… Louisiana Spotlight</div>
  <div class="nav-tab" onclick="showPage('quadrant',this)">âŠž Strategic Matrix</div>
</nav>

<!-- â•â•â•â•â•â•â•â•â•â•â• PAGE: OVERVIEW â•â•â•â•â•â•â•â•â•â•â• -->
<div id="page-overview" class="page active">
  <div class="section-header">
    <div>
      <div class="section-title">National Overview</div>
      <div class="section-subtitle">2025 Health of Women & Children â€” Composite Performance Landscape</div>
    </div>
    <div class="section-tag">86,216 DATA POINTS Â· 1,650 MEASURES Â· 50 STATES</div>
  </div>

  <!-- Score explainer -->
  <div class="score-explainer">
    <div class="icon">ðŸ’¡</div>
    <div class="score-explainer-text">
      <strong>How to read composite scores:</strong> Each state's score combines hundreds of health measures into a single number centered at <strong>0.000</strong> (the national average). A <strong>positive score</strong> means a state performs <em>better</em> than average; a <strong>negative score</strong> means <em>worse</em> than average. The scale typically ranges from about âˆ’1.0 to +1.0 â€” so a score of âˆ’0.33 means a state performs roughly one-third of a standard deviation below the national average across all measures.
      <div class="score-scale">
        <span class="scale-chip sc-great">+0.4 or higher = Significantly better than average</span>
        <span class="scale-chip sc-good">+0.1 to +0.4 = Somewhat better than average</span>
        <span class="scale-chip sc-avg">âˆ’0.1 to +0.1 = Near national average</span>
        <span class="scale-chip sc-poor">âˆ’0.1 to âˆ’0.4 = Somewhat below average</span>
        <span class="scale-chip sc-bad">âˆ’0.4 or lower = Significantly below average</span>
      </div>
    </div>
  </div>

  <!-- KPI row -->
  <div class="grid-5 mb-6">
    <div class="kpi-card kpi-teal">
      <div class="kpi-label">Report Scope</div>
      <div class="kpi-value">1,650</div>
      <div class="kpi-sub">Health measures analyzed</div>
      <span class="kpi-delta d-neu">34 data sources</span>
    </div>
    <div class="kpi-card kpi-green">
      <div class="kpi-label">#1 Ranked State</div>
      <div class="kpi-value">MA</div>
      <div class="kpi-sub">Massachusetts</div>
      <span class="kpi-delta d-pos">Score: +0.766</span>
    </div>
    <div class="kpi-card kpi-blue">
      <div class="kpi-label">National Average</div>
      <div class="kpi-value">0.000</div>
      <div class="kpi-sub">Midpoint of the scale</div>
      <span class="kpi-delta d-neu">All states centered here</span>
    </div>
    <div class="kpi-card kpi-amber">
      <div class="kpi-label">Bestâ€“Worst Gap</div>
      <div class="kpi-value">1.63</div>
      <div class="kpi-sub">Score points apart</div>
      <span class="kpi-delta d-warn">MA (+0.77) vs LA (âˆ’0.87)</span>
    </div>
    <div class="kpi-card kpi-red">
      <div class="kpi-label">South Region Avg</div>
      <div class="kpi-value">âˆ’0.33</div>
      <div class="kpi-sub">One-third below avg</div>
      <span class="kpi-delta d-neg">Lowest of 4 regions</span>
    </div>
  </div>

  <!-- Charts -->
  <div class="grid-2 mb-6">
    <div class="card">
      <div class="card-header">
        <div class="card-title">Regional Performance â€” Composite Score</div>
        <span class="card-badge">4 REGIONS</span>
      </div>
      <div style="font-size:11px;color:var(--text-3);margin-bottom:10px;">Bars above 0 = better than national average Â· Bars below 0 = worse than average</div>
      <canvas id="regionChart" height="260"></canvas>
    </div>
    <div class="card">
      <div class="card-header">
        <div class="card-title">Score Distribution â€” All 50 States (Best â†’ Worst)</div>
        <span class="card-badge">RANKED</span>
      </div>
      <div style="font-size:11px;color:var(--text-3);margin-bottom:10px;">Green bars = above national avg Â· Orange/Red bars = below Â· Louisiana highlighted in amber</div>
      <canvas id="distChart" height="260"></canvas>
    </div>
  </div>

  <!-- Map + table -->
  <div class="grid-2 mb-6">
    <div class="card">
      <div class="card-header">
        <div class="card-title">State Performance Map</div>
        <div class="text-xs text-muted">Dark green = Top ranked Â· Dark red = Bottom ranked Â· Hover for details</div>
      </div>
      <div id="stateMap" class="state-grid mt-2"></div>
      <div style="font-size:11px;color:var(--text-3);margin-top:10px;">States are ordered left-to-right by rank (#1 best to #50 worst). Color intensity reflects how far above or below the national average each state falls.</div>
    </div>
    <div class="card">
      <div class="card-header"><div class="card-title">Best & Worst Performing States</div></div>
      <div style="font-size:10px;font-weight:700;color:var(--text-4);letter-spacing:.8px;text-transform:uppercase;margin-bottom:8px">TOP 10</div>
      <div id="topStatesTable"></div>
      <div style="font-size:10px;font-weight:700;color:var(--text-4);letter-spacing:.8px;text-transform:uppercase;margin:16px 0 8px">BOTTOM 10</div>
      <div id="bottomStatesTable"></div>
    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â• PAGE: RANKINGS â•â•â•â•â•â•â•â•â•â•â• -->
<div id="page-rankings" class="page">
  <div class="section-header">
    <div>
      <div class="section-title">State Rankings Explorer</div>
      <div class="section-subtitle">Compare states across all health domains</div>
    </div>
  </div>

  <div class="score-explainer">
    <div class="icon">ðŸ’¡</div>
    <div class="score-explainer-text">
      <strong>How domain scores work:</strong> Each domain (e.g., Clinical Care, Behaviors) has its own composite score on the same 0-centered scale. A state can rank very differently across domains â€” for example, Louisiana ranks <strong>#1 in Clinical Care access</strong> for well-woman visits but <strong>#49 in Social & Economic factors</strong>. Use the radar chart to see a state's full profile at a glance.
      <div class="score-scale">
        <span class="scale-chip sc-great">Longer bar to the right = better performance</span>
        <span class="scale-chip sc-bad">Longer bar to the left = worse performance</span>
        <span class="scale-chip sc-avg">Louisiana is always highlighted in amber</span>
      </div>
    </div>
  </div>

  <div class="filter-bar mb-6">
    <span class="filter-label">Domain:</span>
    <select id="domainSelect" onchange="updateRankings()">
      <option value="Overall">Overall (Women & Children)</option>
      <option value="Health Outcomes">Health Outcomes</option>
      <option value="Clinical Care">Clinical Care</option>
      <option value="Social & Economic">Social & Economic Factors</option>
      <option value="Behaviors">Behaviors</option>
      <option value="Physical Environment">Physical Environment</option>
    </select>
    <span class="filter-label" style="margin-left:12px">Region:</span>
    <select id="regionFilter" onchange="updateRankings()">
      <option value="all">All Regions</option>
      <option value="Northeast">Northeast</option>
      <option value="South">South</option>
      <option value="Midwest">Midwest</option>
      <option value="West">West</option>
    </select>
  </div>

  <div class="grid-2">
    <div class="card">
      <div class="card-header"><div class="card-title" id="rankingsChartLabel">State Rankings â€” Overall</div></div>
      <div style="height:580px;overflow-y:auto"><canvas id="rankingsChart"></canvas></div>
    </div>
    <div class="card">
      <div class="card-header">
        <div class="card-title">Domain Radar â€” Compare Two States</div>
        <div style="display:flex;gap:8px;">
          <select id="stateCompare1" onchange="updateRadar()"></select>
          <select id="stateCompare2" onchange="updateRadar()"></select>
        </div>
      </div>
      <div style="font-size:11px;color:var(--text-3);margin-bottom:10px;">Each axis = one health domain. A larger shaded area = stronger overall profile. Points farther from center = better performance in that domain.</div>
      <canvas id="radarChart" height="300"></canvas>
      <div id="radarStats" class="mt-4"></div>
    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â• PAGE: INDICATORS â•â•â•â•â•â•â•â•â•â•â• -->
<div id="page-indicators" class="page">
  <div class="section-header">
    <div>
      <div class="section-title">Key Health Indicators</div>
      <div class="section-subtitle">Raw metric values across 17 critical measures â€” all 50 states</div>
    </div>
  </div>

  <div class="score-explainer">
    <div class="icon">ðŸ’¡</div>
    <div class="score-explainer-text">
      <strong>Reading this tab:</strong> Unlike composite scores, these are <em>real-world measurements</em> â€” actual rates and percentages. For example, infant mortality of 7.3 means 7.3 babies die per 1,000 live births. The <strong>dashed line</strong> on each chart shows the national average. Louisiana is highlighted in <span style="color:var(--amber-mid);font-weight:600;">amber</span>. For most indicators, <em>lower = better</em> (e.g., lower mortality, lower poverty rate). For Well-Woman Visits and Breastfeeding, <em>higher = better</em>.
    </div>
  </div>

  <div class="filter-bar">
    <span class="filter-label">Select Indicator:</span>
    <select id="indicatorSelect" onchange="updateIndicator()">
      <option value="Infant Mortality">Infant Mortality (per 1,000 births)</option>
      <option value="Maternal Mortality">Maternal Mortality (per 100,000 births)</option>
      <option value="Child Mortality">Child Mortality (per 100,000)</option>
      <option value="Teen Births">Teen Births (per 1,000 women 15-19)</option>
      <option value="Low Birth Weight">Low Birth Weight (%)</option>
      <option value="Children in Poverty">Children in Poverty (%)</option>
      <option value="Food Insecurity">Food Insecurity (%)</option>
      <option value="Obesity Women">Obesity â€” Women (%)</option>
      <option value="Smoking Women">Smoking â€” Women (%)</option>
      <option value="Drug Deaths Women">Drug Deaths â€” Women (per 100,000)</option>
      <option value="Firearm Deaths Children">Firearm Deaths â€” Children (per 100,000)</option>
      <option value="Uninsured Women">Uninsured Women (%)</option>
      <option value="Uninsured Children">Uninsured Children (%)</option>
      <option value="Well Woman Visit">Well-Woman Visit (%) â†‘ Higher is better</option>
      <option value="Breastfeeding Initiation">Breastfeeding Initiation (%) â†‘ Higher is better</option>
      <option value="Teen Suicide">Teen Suicide (per 100,000)</option>
      <option value="Adequate Prenatal Care">Adequate Prenatal Care (%) â†‘ Higher is better</option>
    </select>
  </div>

  <div class="card mb-6">
    <div class="card-header">
      <div class="card-title" id="indicatorChartTitle">Infant Mortality â€” All States</div>
      <div id="indicatorNatAvg"></div>
    </div>
    <canvas id="indicatorChart" height="300"></canvas>
  </div>

  <div class="grid-3">
    <div class="card">
      <div class="card-header"><div class="card-title">National Statistics</div></div>
      <div id="indicatorStats"></div>
      <div style="font-size:11px;color:var(--text-3);margin-top:12px;padding-top:10px;border-top:1px solid var(--border);">
        "LA vs Avg" shows how Louisiana compares to the national mean. A negative number for mortality indicators means Louisiana is doing <em>worse</em> than average (more deaths per 100,000).
      </div>
    </div>
    <div class="card">
      <div class="card-header"><div class="card-title">Best Performing States</div></div>
      <div id="indicatorBest"></div>
    </div>
    <div class="card">
      <div class="card-header"><div class="card-title">Worst Performing States</div></div>
      <div id="indicatorWorst"></div>
    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â• PAGE: EQUITY â•â•â•â•â•â•â•â•â•â•â• -->
<div id="page-equity" class="page">
  <div class="section-header">
    <div>
      <div class="section-title">Health Equity Analysis</div>
      <div class="section-subtitle">Racial & demographic disparities across key measures</div>
    </div>
  </div>

  <div class="score-explainer">
    <div class="icon">ðŸ’¡</div>
    <div class="score-explainer-text">
      <strong>What equity analysis shows:</strong> These charts display <em>the same health measure broken down by race</em>. When bars for different racial groups differ significantly, that gap represents a health equity disparity â€” meaning health outcomes are unequal even within the same state. In Louisiana's case, <strong>Black children experience poverty at 42%</strong> vs. 14.5% for White children. The <span style="color:var(--amber-mid);font-weight:600;">amber bars</span> show Louisiana's values; colored bars show national averages by race. Larger differences = larger equity gaps.
    </div>
  </div>

  <div class="grid-2 mb-6">
    <div class="card">
      <div class="card-header">
        <div class="card-title">Infant Mortality by Race â€” National Averages</div>
        <span class="unit-tag">per 1,000 births</span>
      </div>
      <div style="font-size:11px;color:var(--text-3);margin-bottom:8px;">Black infant mortality is more than double the White rate nationally â€” one of the starkest health equity gaps in the U.S.</div>
      <canvas id="equityRaceChart" height="260"></canvas>
    </div>
    <div class="card">
      <div class="card-header">
        <div class="card-title">Children in Poverty by Race</div>
        <span class="unit-tag">%</span>
      </div>
      <div style="font-size:11px;color:var(--text-3);margin-bottom:8px;">Poverty is the most powerful predictor of poor health outcomes. These disparities drive much of Louisiana's overall ranking gap.</div>
      <canvas id="equityPovertyChart" height="260"></canvas>
    </div>
  </div>

  <div class="grid-2 mb-6">
    <div class="card">
      <div class="card-header">
        <div class="card-title">Black vs. White Infant Mortality Gap â€” Select States</div>
      </div>
      <div style="font-size:11px;color:var(--text-3);margin-bottom:8px;">The gap between Black and White infant mortality varies widely by state. Even "high-performing" states like MN and WI show large racial disparities.</div>
      <canvas id="equityGapChart" height="260"></canvas>
    </div>
    <div class="card">
      <div class="card-header">
        <div class="card-title">Teen Births by Race â€” National Rates</div>
      </div>
      <div style="font-size:11px;color:var(--text-3);margin-bottom:8px;">Teen birth rates per 1,000 women age 15â€“19. Lower rates reflect better access to education, contraception, and economic opportunity.</div>
      <canvas id="equityTeenChart" height="260"></canvas>
    </div>
  </div>

  <div class="card">
    <div class="card-header">
      <div class="card-title">Equity Summary Table â€” Louisiana vs. National Average by Race</div>
    </div>
    <div style="font-size:11px;color:var(--text-3);margin-bottom:10px;">A positive number in "LA vs National" for mortality/poverty indicators means Louisiana is <em>doing worse</em> than the national average for that racial group. A negative number means better than average.</div>
    <div id="equitySummaryTable"></div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â• PAGE: SPOTLIGHT â•â•â•â•â•â•â•â•â•â•â• -->
<div id="page-spotlight" class="page">
  <div class="section-header">
    <div>
      <div class="section-title">Louisiana Spotlight</div>
      <div class="section-subtitle">Comprehensive performance profile â€” Ranked #50 overall (2025)</div>
    </div>
    <div style="text-align:right">
      <div style="font-family:'DM Serif Display',serif;font-size:52px;line-height:1;color:var(--red-mid);">50</div>
      <div class="text-xs text-muted">OVERALL RANK</div>
    </div>
  </div>

  <div class="score-explainer">
    <div class="icon">ðŸ’¡</div>
    <div class="score-explainer-text">
      <strong>Louisiana's paradox explained:</strong> Louisiana's overall score of <strong>âˆ’0.868</strong> places it last among all 50 states â€” meaning its combined performance across all health measures is nearly a full standard deviation below the national average. However, this masks a critical nuance: Louisiana ranks <strong>#1 in clinical access</strong> (well-woman visits) and <strong>#23 in overall clinical care</strong>. The state's low ranking is driven almost entirely by <strong>social and economic conditions</strong> â€” poverty, food insecurity, and housing â€” that fall outside the healthcare system's direct control.
      <div class="score-scale">
        <span class="scale-chip sc-bad">âˆ’0.868 overall = last in the nation</span>
        <span class="scale-chip sc-good">+0.289 clinical care = above average</span>
        <span class="scale-chip sc-bad">âˆ’1.044 social/economic = near bottom</span>
      </div>
    </div>
  </div>

  <div class="mb-6">
    <span class="insight-pill pill-critical">âš  #50 Overall</span>
    <span class="insight-pill pill-critical">âš  #50 Child Health</span>
    <span class="insight-pill pill-critical">âš  #49 Children in Poverty (25%)</span>
    <span class="insight-pill pill-critical">âš  #49 Low Birth Weight (11.3%)</span>
    <span class="insight-pill pill-warning">â–³ #48 Infant Mortality (7.3/1k)</span>
    <span class="insight-pill pill-warning">â–³ #46 Maternal Mortality (40.7/100k)</span>
    <span class="insight-pill pill-positive">âœ“ #1 Well-Woman Visit (80.3%)</span>
    <span class="insight-pill pill-positive">âœ“ #5 Cervical Cancer Screening</span>
    <span class="insight-pill pill-positive">âœ“ #23 Clinical Care Overall</span>
  </div>

  <div class="grid-2 mb-6">
    <div class="card">
      <div class="card-header"><div class="card-title">Domain Profile â€” Louisiana vs. National Average vs. Best State (MA)</div></div>
      <div style="font-size:11px;color:var(--text-3);margin-bottom:8px;">Each axis = one domain score. Louisiana's shape (amber) vs. the national average (blue dashed) shows where it falls behind. The closer Louisiana's line is to the outer edge, the better its performance in that domain.</div>
      <canvas id="laRadarChart" height="300"></canvas>
    </div>
    <div class="card">
      <div class="card-header">
        <div class="card-title">Domain Gap Analysis â€” How Far from Average?</div>
        <span class="unit-tag">Standard deviations from mean</span>
      </div>
      <div style="font-size:11px;color:var(--text-3);margin-bottom:12px;">These bars show how many "standard deviations" Louisiana is from the national average in each domain. Think of it as a gap measure: a score of âˆ’2.35 means Louisiana is extremely far below average â€” in the bottom 1â€“2% of all states for that domain.</div>
      <div id="laDomainBars" style="padding-top:4px"></div>
      <div style="margin-top:12px;padding-top:12px;border-top:1px solid var(--border);font-size:11px;color:var(--text-3);">
        <strong style="color:var(--red-mid);">Z &lt; âˆ’2.0</strong> = Statistically extreme â€” far worse than nearly all states &nbsp;|&nbsp;
        <strong style="color:var(--amber-mid);">âˆ’1.0 to âˆ’2.0</strong> = Significant gap &nbsp;|&nbsp;
        <strong style="color:var(--green);">Z &gt; 0</strong> = At or above national average
      </div>
    </div>
  </div>

  <div class="grid-2 mb-6">
    <div class="card">
      <div class="card-header"><div class="card-title">Critical Gaps â€” Worst Rankings</div></div>
      <div style="font-size:11px;color:var(--text-3);margin-bottom:10px;">Areas where Louisiana needs urgent attention. Rank shown out of 50 states â€” lower rank = worse performance.</div>
      <div id="laCriticalGaps"></div>
    </div>
    <div class="card">
      <div class="card-header"><div class="card-title">Relative Strengths â€” Best Rankings</div></div>
      <div style="font-size:11px;color:var(--text-3);margin-bottom:10px;">Areas where Louisiana performs well despite its overall ranking â€” important foundations to build on.</div>
      <div id="laStrengths"></div>
    </div>
  </div>

  <div class="card">
    <div class="card-header"><div class="card-title">Louisiana vs. Southern States â€” Overall Composite Score</div></div>
    <div style="font-size:11px;color:var(--text-3);margin-bottom:10px;">Even within the South â€” the lowest-performing region â€” Louisiana ranks last. Maryland (+0.462) shows that Southern states can achieve strong performance with the right investments.</div>
    <canvas id="laSouthChart" height="260"></canvas>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â• PAGE: QUADRANT â•â•â•â•â•â•â•â•â•â•â• -->
<div id="page-quadrant" class="page">
  <div class="section-header">
    <div>
      <div class="section-title">Strategic Priority Matrix</div>
      <div class="section-subtitle">Four-quadrant framework â€” Where to maintain, leverage, monitor, and intervene</div>
    </div>
  </div>

  <div class="score-explainer">
    <div class="icon">ðŸ’¡</div>
    <div class="score-explainer-text">
      <strong>How to use this matrix:</strong> The four quadrants organize Louisiana's health indicators by <em>performance level</em> and <em>urgency of action needed</em>. 
      <strong style="color:var(--green);">Maintain Excellence</strong> = already strong, protect these gains. 
      <strong style="color:var(--blue);">Leverage for Improvement</strong> = moderate performance, use existing strengths to improve. 
      <strong style="color:var(--amber-mid);">Monitor Closely</strong> = near average but at risk of slipping. 
      <strong style="color:var(--red-mid);">Priority Intervention</strong> = worst gaps, most urgent need for policy action. The Z-score column shows how extreme the gap is â€” a Z of +2.31 means Louisiana's rate is more than 2 standard deviations worse than the national average, placing it in the bottom 1â€“2% of all states.
    </div>
  </div>

  <div class="grid-2 mb-6">
    <div class="card">
      <div class="card-header"><div class="card-title">All States â€” Composite Score vs. Rank (Scatter)</div></div>
      <div style="font-size:11px;color:var(--text-3);margin-bottom:8px;">Each dot = one state. Louisiana (â˜… amber star) appears in the bottom-left corner, confirming its position as both the lowest-scored and lowest-ranked state. The tight cluster shows most states perform near the national average.</div>
      <canvas id="scatterChart" height="360"></canvas>
    </div>
    <div class="card">
      <div class="card-header"><div class="card-title">Louisiana Strategic Quadrant Assessment</div></div>
      <div class="quadrant-grid mt-2">
        <div class="quadrant q-maintain">
          <div class="q-label" style="color:var(--green)">âœ“ Maintain Excellence</div>
          <div class="q-sub">High Performance Â· At or Above Benchmark</div>
          <ul class="q-items">
            <li>Well-Woman Visit (#1, 80.3%)</li>
            <li>Cervical Cancer Screening (#5)</li>
            <li>Clinical Care â€” Children (#23)</li>
            <li>Teen Suicide Rate (#17)</li>
          </ul>
        </div>
        <div class="quadrant q-leverage">
          <div class="q-label" style="color:var(--blue)">â†’ Leverage for Improvement</div>
          <div class="q-sub">Moderate Performance Â· Gap Narrowing</div>
          <ul class="q-items">
            <li>Uninsured Women (#24, 8.6%)</li>
            <li>Uninsured Children (#24, 4.3%)</li>
            <li>Clinical Care â€” Women (#31)</li>
            <li>Depression Screening (#36)</li>
          </ul>
        </div>
        <div class="quadrant q-monitor">
          <div class="q-label" style="color:var(--amber-mid)">â—Ž Monitor Closely</div>
          <div class="q-sub">Near Benchmark Â· Potential Volatility</div>
          <ul class="q-items">
            <li>Adequate Prenatal Care (#34)</li>
            <li>High Health Status Women (#35)</li>
            <li>Smoking â€” Women (#36)</li>
            <li>High Health Status Children (#41)</li>
          </ul>
        </div>
        <div class="quadrant q-intervene">
          <div class="q-label" style="color:var(--red-mid)">âš  Priority Intervention</div>
          <div class="q-sub">Low Performance Â· Widest Gaps</div>
          <ul class="q-items">
            <li>Children in Poverty (#49, 25.0%)</li>
            <li>Low Birth Weight (#49, 11.3%)</li>
            <li>Child Mortality (#49, 48.9/100k)</li>
            <li>Infant Mortality (#48, 7.3/1k)</li>
            <li>Maternal Mortality (#46, 40.7/100k)</li>
            <li>Drug Deaths â€” Women (#46)</li>
            <li>Food Insecurity (#47, 16.2%)</li>
            <li>Teen Births (#48, 23.1)</li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <div class="card">
    <div class="card-header"><div class="card-title">Evidence-Based Priority Recommendations</div></div>
    <div style="font-size:11px;color:var(--text-3);margin-bottom:12px;">Z-Score = number of standard deviations from the national mean. A Z of +2.24 SD means Louisiana is worse than approximately 98% of all states on that measure â€” indicating an extreme, urgent gap requiring targeted intervention.</div>
    <table class="data-table">
      <thead>
        <tr>
          <th>Priority Area</th>
          <th>Rank</th>
          <th>Z-Score</th>
          <th>Gap Type</th>
          <th>Strategic Recommendation</th>
        </tr>
      </thead>
      <tbody>
        <tr><td><span style="color:var(--red-mid)">â– </span> Children in Poverty</td><td><span class="rank-badge r-bot">49</span></td><td style="color:var(--red-mid);font-weight:600">+2.24 SD</td><td>Structural / Social Determinant</td><td>Expand SNAP, CHIP, EITC access; place-based investment</td></tr>
        <tr><td><span style="color:var(--red-mid)">â– </span> Maternal Mortality</td><td><span class="rank-badge r-bot">46</span></td><td style="color:var(--red-mid);font-weight:600">Extreme</td><td>Clinical + Social</td><td>Extend Medicaid postpartum coverage; implicit bias training in OB</td></tr>
        <tr><td><span style="color:var(--red-mid)">â– </span> Low Birth Weight</td><td><span class="rank-badge r-bot">49</span></td><td style="color:var(--red-mid);font-weight:600">+2.31 SD</td><td>Behavioral + Clinical</td><td>Prenatal smoking cessation programs; nutrition supplementation</td></tr>
        <tr><td><span style="color:var(--red-mid)">â– </span> Drug Deaths (Women)</td><td><span class="rank-badge r-bot">46</span></td><td style="color:var(--amber-mid);font-weight:600">Extreme</td><td>Behavioral Health</td><td>Expand MAT access, naloxone distribution, harm reduction sites</td></tr>
        <tr><td><span style="color:var(--amber-mid)">â– </span> Breastfeeding Initiation</td><td><span class="rank-badge r-bot">47</span></td><td style="color:var(--red-mid);font-weight:600">âˆ’2.00 SD</td><td>Clinical + Cultural</td><td>Lactation consultants in hospitals; expand WIC breastfeeding support</td></tr>
        <tr><td><span style="color:var(--green)">â– </span> Well-Woman Visit</td><td><span class="rank-badge r-top">1</span></td><td style="color:var(--green);font-weight:600">+1.78 SD</td><td>Strength to Leverage</td><td>Use existing access infrastructure to drive uptake of other preventive care</td></tr>
      </tbody>
    </table>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â• JAVASCRIPT â•â•â•â•â•â•â•â•â•â•â• -->
<script>
// Chart defaults for Option B light theme
Chart.defaults.color='#6b7280';
Chart.defaults.borderColor='#dde2ef';
Chart.defaults.font.family="'DM Sans',system-ui,sans-serif";
Chart.defaults.font.size=11;

const DATA={
stateNames:{"AL":"Alabama","AK":"Alaska","AZ":"Arizona","AR":"Arkansas","CA":"California","CO":"Colorado","CT":"Connecticut","DE":"Delaware","FL":"Florida","GA":"Georgia","HI":"Hawaii","ID":"Idaho","IL":"Illinois","IN":"Indiana","IA":"Iowa","KS":"Kansas","KY":"Kentucky","LA":"Louisiana","ME":"Maine","MD":"Maryland","MA":"Massachusetts","MI":"Michigan","MN":"Minnesota","MS":"Mississippi","MO":"Missouri","MT":"Montana","NE":"Nebraska","NV":"Nevada","NH":"New Hampshire","NJ":"New Jersey","NM":"New Mexico","NY":"New York","NC":"North Carolina","ND":"North Dakota","OH":"Ohio","OK":"Oklahoma","OR":"Oregon","PA":"Pennsylvania","RI":"Rhode Island","SC":"South Carolina","SD":"South Dakota","TN":"Tennessee","TX":"Texas","UT":"Utah","VT":"Vermont","VA":"Virginia","WA":"Washington","WV":"West Virginia","WI":"Wisconsin","WY":"Wyoming"},
regions:{"ME":"Northeast","NH":"Northeast","VT":"Northeast","MA":"Northeast","RI":"Northeast","CT":"Northeast","NY":"Northeast","NJ":"Northeast","PA":"Northeast","OH":"Midwest","IN":"Midwest","IL":"Midwest","MI":"Midwest","WI":"Midwest","MN":"Midwest","IA":"Midwest","MO":"Midwest","ND":"Midwest","SD":"Midwest","NE":"Midwest","KS":"Midwest","DE":"South","MD":"South","VA":"South","WV":"South","NC":"South","SC":"South","GA":"South","FL":"South","KY":"South","TN":"South","AL":"South","MS":"South","AR":"South","LA":"South","OK":"South","TX":"South","MT":"West","ID":"West","WY":"West","CO":"West","NM":"West","AZ":"West","UT":"West","NV":"West","WA":"West","OR":"West","CA":"West","AK":"West","HI":"West"},
overall:{"AK":{score:-0.189,rank:35},"AR":{score:-0.84,rank:49},"AL":{score:-0.504,rank:45},"AZ":{score:-0.182,rank:34},"CT":{score:0.492,rank:7},"CA":{score:0.14,rank:18},"CO":{score:0.482,rank:8},"DE":{score:0.056,rank:21},"FL":{score:-0.171,rank:33},"GA":{score:-0.281,rank:38},"HI":{score:0.339,rank:12},"IA":{score:0.211,rank:15},"ID":{score:0.049,rank:22},"IL":{score:0.1,rank:20},"IN":{score:-0.147,rank:31},"KS":{score:0.14,rank:17},"KY":{score:-0.345,rank:40},"LA":{score:-0.868,rank:50},"MA":{score:0.766,rank:1},"MD":{score:0.462,rank:9},"ME":{score:0.367,rank:11},"MI":{score:0.014,rank:24},"MN":{score:0.607,rank:3},"MO":{score:-0.258,rank:37},"MS":{score:-0.806,rank:48},"MT":{score:-0.035,rank:26},"NC":{score:-0.038,rank:27},"ND":{score:0.118,rank:19},"NE":{score:0.274,rank:14},"NH":{score:0.587,rank:4},"NJ":{score:0.522,rank:6},"NM":{score:-0.455,rank:42},"NV":{score:-0.477,rank:43},"NY":{score:0.304,rank:13},"OH":{score:-0.081,rank:29},"OK":{score:-0.712,rank:47},"OR":{score:0.032,rank:23},"PA":{score:-0.063,rank:28},"RI":{score:0.206,rank:16},"SC":{score:-0.3,rank:39},"SD":{score:-0.091,rank:30},"TN":{score:-0.503,rank:44},"TX":{score:-0.368,rank:41},"UT":{score:0.55,rank:5},"VA":{score:0.01,rank:25},"VT":{score:0.628,rank:2},"WA":{score:0.445,rank:10},"WI":{score:-0.155,rank:32},"WV":{score:-0.62,rank:46},"WY":{score:-0.24,rank:36}},
domains:{"Health Outcomes":{"AK":-0.162,"AR":-0.726,"AL":-0.588,"AZ":-0.164,"CT":0.424,"CA":-0.073,"CO":0.385,"DE":-0.022,"FL":-0.329,"GA":-0.335,"HI":0.325,"IA":0.152,"ID":-0.128,"IL":-0.065,"IN":-0.199,"KS":-0.026,"KY":-0.438,"LA":-1.21,"MA":0.756,"MD":0.208,"ME":0.376,"MI":-0.213,"MN":0.555,"MO":-0.311,"MS":-0.925,"MT":-0.196,"NC":-0.263,"ND":-0.023,"NE":0.116,"NH":0.596,"NJ":0.407,"NM":-0.569,"NV":-0.595,"NY":0.218,"OH":-0.124,"OK":-0.643,"OR":-0.043,"PA":-0.138,"RI":0.111,"SC":-0.411,"SD":-0.174,"TN":-0.569,"TX":-0.419,"UT":0.412,"VA":0.015,"VT":0.538,"WA":0.334,"WI":-0.149,"WV":-0.625,"WY":-0.268},
"Clinical Care":{"AK":-0.452,"AR":-1.015,"AL":-0.637,"AZ":-0.175,"CT":0.69,"CA":0.405,"CO":0.587,"DE":0.403,"FL":0.161,"GA":-0.165,"HI":0.564,"IA":0.509,"ID":-0.088,"IL":0.455,"IN":0.044,"KS":0.354,"KY":-0.136,"LA":0.289,"MA":1.483,"MD":0.889,"ME":0.684,"MI":0.358,"MN":1.102,"MO":0.232,"MS":-0.788,"MT":-0.327,"NC":0.208,"ND":0.09,"NE":0.386,"NH":1.119,"NJ":1.033,"NM":-0.492,"NV":-0.635,"NY":0.861,"OH":0.284,"OK":-0.673,"OR":0.329,"PA":0.42,"RI":0.774,"SC":-0.087,"SD":0.055,"TN":-0.335,"TX":-0.331,"UT":0.48,"VA":0.44,"VT":1.009,"WA":0.647,"WI":0.59,"WV":-0.394,"WY":-0.197},
"Social & Economic":{"AK":-0.087,"AR":-1.214,"AL":-0.726,"AZ":-0.424,"CT":0.539,"CA":0.117,"CO":0.562,"DE":0.338,"FL":-0.162,"GA":-0.362,"HI":0.419,"IA":0.487,"ID":0.011,"IL":0.109,"IN":-0.104,"KS":0.199,"KY":-0.503,"LA":-1.044,"MA":0.966,"MD":0.772,"ME":0.211,"MI":-0.159,"MN":0.734,"MO":-0.393,"MS":-1.092,"MT":0.143,"NC":-0.123,"ND":0.561,"NE":0.462,"NH":0.763,"NJ":0.549,"NM":-0.639,"NV":-0.463,"NY":0.185,"OH":-0.269,"OK":-0.831,"OR":0.056,"PA":-0.067,"RI":0.085,"SC":-0.461,"SD":0.229,"TN":-0.646,"TX":-0.565,"UT":0.558,"VA":0.295,"VT":0.506,"WA":0.538,"WI":0.133,"WV":-0.958,"WY":0.145},
"Behaviors":{"AK":-0.267,"AR":-1.049,"AL":-1.029,"AZ":-0.035,"CT":0.584,"CA":0.395,"CO":0.671,"DE":0.022,"FL":-0.05,"GA":-0.247,"HI":0.604,"IA":0.293,"ID":0.386,"IL":0.249,"IN":-0.113,"KS":0.182,"KY":-0.676,"LA":-1.188,"MA":0.938,"MD":0.299,"ME":0.527,"MI":-0.079,"MN":0.714,"MO":-0.397,"MS":-1.257,"MT":0.182,"NC":0.041,"ND":0.161,"NE":0.368,"NH":0.714,"NJ":0.289,"NM":-0.307,"NV":-0.298,"NY":0.277,"OH":-0.197,"OK":-0.786,"OR":0.219,"PA":-0.158,"RI":0.179,"SC":-0.372,"SD":0.199,"TN":-0.759,"TX":-0.408,"UT":0.562,"VA":0.106,"VT":0.745,"WA":0.459,"WI":0.043,"WV":-1.108,"WY":-0.169},
"Physical Environment":{"AK":-0.052,"AR":-0.377,"AL":-0.391,"AZ":0.007,"CT":0.421,"CA":0.115,"CO":0.411,"DE":0.235,"FL":0.037,"GA":-0.079,"HI":0.378,"IA":0.302,"ID":0.292,"IL":0.018,"IN":-0.203,"KS":0.204,"KY":-0.266,"LA":-0.579,"MA":0.62,"MD":0.232,"ME":0.786,"MI":-0.07,"MN":0.407,"MO":-0.093,"MS":-0.649,"MT":0.499,"NC":-0.043,"ND":0.445,"NE":0.397,"NH":0.657,"NJ":-0.068,"NM":-0.182,"NV":-0.263,"NY":0.086,"OH":0.008,"OK":-0.18,"OR":0.27,"PA":-0.022,"RI":0.054,"SC":-0.109,"SD":0.395,"TN":-0.314,"TX":-0.137,"UT":0.465,"VA":0.084,"VT":0.512,"WA":0.431,"WI":0.137,"WV":-0.313,"WY":0.328}},
indicators:{"Infant Mortality":{unit:"per 1,000 births",good:false,data:{"AK":5.6,"AR":7.4,"AL":8.1,"AZ":5.5,"CT":5.5,"CA":3.9,"CO":4.6,"DE":7.1,"FL":6.0,"GA":7.4,"HI":5.6,"IA":5.0,"ID":4.9,"IL":6.1,"IN":7.0,"KS":6.1,"KY":7.0,"LA":7.3,"MA":3.6,"MD":6.7,"ME":5.7,"MI":6.3,"MN":4.3,"MO":7.1,"MS":9.0,"MT":5.7,"NC":6.4,"ND":5.3,"NE":5.5,"NH":3.2,"NJ":4.6,"NM":6.1,"NV":6.2,"NY":4.7,"OH":6.9,"OK":7.2,"OR":4.8,"PA":6.2,"RI":6.4,"SC":7.2,"SD":6.3,"TN":7.6,"TX":5.7,"UT":4.7,"VA":5.6,"VT":4.4,"WA":4.1,"WI":5.7,"WV":7.5,"WY":5.8}},
"Maternal Mortality":{unit:"per 100,000 births",good:false,data:{"AK":21.6,"AR":40.0,"AL":36.4,"AZ":19.3,"CT":8.5,"CA":11.5,"CO":13.8,"DE":25.6,"FL":23.8,"GA":33.2,"HI":11.5,"IA":14.5,"ID":17.3,"IL":16.9,"IN":29.1,"KS":22.8,"KY":29.2,"LA":40.7,"MA":10.1,"MD":18.3,"ME":16.1,"MI":24.0,"MN":8.2,"MO":27.5,"MS":48.0,"MT":18.0,"NC":25.0,"ND":12.0,"NE":15.0,"NH":7.8,"NJ":13.1,"NM":26.0,"NV":21.3,"NY":17.6,"OH":21.2,"OK":33.0,"OR":16.0,"PA":20.5,"RI":16.0,"SC":29.0,"SD":18.0,"TN":29.8,"TX":23.5,"UT":9.9,"VA":17.0,"VT":9.5,"WA":13.3,"WI":15.0,"WV":37.0,"WY":24.0}},
"Child Mortality":{unit:"per 100,000",good:false,data:{"AK":25.8,"AR":53.4,"AL":50.5,"AZ":26.5,"CT":14.0,"CA":18.1,"CO":20.9,"DE":25.0,"FL":29.4,"GA":37.1,"HI":18.2,"IA":21.8,"ID":23.2,"IL":23.2,"IN":34.1,"KS":26.7,"KY":41.1,"LA":48.9,"MA":12.3,"MD":21.5,"ME":17.4,"MI":29.7,"MN":13.7,"MO":37.7,"MS":61.5,"MT":25.0,"NC":26.4,"ND":18.8,"NE":21.0,"NH":12.0,"NJ":15.7,"NM":35.5,"NV":29.0,"NY":17.1,"OH":29.4,"OK":49.5,"OR":22.0,"PA":26.2,"RI":15.0,"SC":38.7,"SD":24.0,"TN":41.2,"TX":30.5,"UT":18.5,"VA":20.8,"VT":14.0,"WA":20.0,"WI":23.2,"WV":48.0,"WY":28.0}},
"Teen Births":{unit:"per 1,000 women 15-19",good:false,data:{"AK":17.0,"AR":30.7,"AL":27.6,"AZ":18.4,"CT":8.8,"CA":13.7,"CO":12.4,"DE":14.5,"FL":15.7,"GA":22.3,"HI":16.3,"IA":12.5,"ID":14.8,"IL":13.2,"IN":19.5,"KS":16.4,"KY":22.8,"LA":23.1,"MA":6.0,"MD":13.4,"ME":10.8,"MI":14.1,"MN":7.7,"MO":21.0,"MS":30.0,"MT":17.0,"NC":17.5,"ND":12.0,"NE":13.2,"NH":5.8,"NJ":8.4,"NM":24.5,"NV":18.0,"NY":10.0,"OH":18.0,"OK":26.5,"OR":11.3,"PA":13.0,"RI":10.5,"SC":22.0,"SD":18.0,"TN":25.0,"TX":22.0,"UT":11.0,"VA":12.0,"VT":7.0,"WA":11.5,"WI":12.5,"WV":26.0,"WY":16.0}},
"Low Birth Weight":{unit:"%",good:false,data:{"AK":5.8,"AR":10.5,"AL":10.5,"AZ":7.2,"CT":6.9,"CA":7.0,"CO":7.3,"DE":8.5,"FL":8.8,"GA":9.9,"HI":7.5,"IA":6.6,"ID":6.5,"IL":8.1,"IN":8.4,"KS":7.5,"KY":9.1,"LA":11.3,"MA":6.4,"MD":8.6,"ME":6.1,"MI":7.9,"MN":5.9,"MO":8.3,"MS":11.0,"MT":6.5,"NC":8.7,"ND":6.2,"NE":6.9,"NH":5.7,"NJ":8.0,"NM":8.2,"NV":8.1,"NY":7.8,"OH":8.4,"OK":9.1,"OR":6.4,"PA":8.0,"RI":7.4,"SC":9.8,"SD":6.5,"TN":9.7,"TX":8.4,"UT":6.2,"VA":7.6,"VT":5.8,"WA":6.3,"WI":6.6,"WV":10.0,"WY":7.0}},
"Children in Poverty":{unit:"%",good:false,data:{"AK":11.5,"AR":24.8,"AL":22.5,"AZ":19.2,"CT":10.8,"CA":15.5,"CO":9.5,"DE":14.5,"FL":17.0,"GA":20.0,"HI":10.2,"IA":10.5,"ID":12.0,"IL":15.5,"IN":15.0,"KS":12.5,"KY":20.0,"LA":25.0,"MA":10.0,"MD":9.5,"ME":11.5,"MI":16.5,"MN":9.0,"MO":17.5,"MS":27.5,"MT":14.0,"NC":17.0,"ND":9.5,"NE":11.0,"NH":6.5,"NJ":10.5,"NM":24.5,"NV":16.5,"NY":17.5,"OH":17.5,"OK":22.5,"OR":14.0,"PA":15.5,"RI":14.0,"SC":19.5,"SD":13.0,"TN":21.0,"TX":20.0,"UT":7.5,"VA":10.0,"VT":8.5,"WA":11.0,"WI":12.0,"WV":22.0,"WY":11.0}},
"Food Insecurity":{unit:"%",good:false,data:{"AK":14.0,"AR":17.5,"AL":17.0,"AZ":14.5,"CT":9.5,"CA":12.5,"CO":9.0,"DE":11.5,"FL":14.0,"GA":14.5,"HI":11.0,"IA":10.5,"ID":11.0,"IL":13.0,"IN":13.5,"KS":11.5,"KY":16.0,"LA":16.2,"MA":9.0,"MD":10.5,"ME":11.5,"MI":13.5,"MN":9.0,"MO":13.5,"MS":18.5,"MT":12.0,"NC":14.5,"ND":9.5,"NE":10.0,"NH":7.5,"NJ":9.5,"NM":16.5,"NV":13.5,"NY":12.5,"OH":14.0,"OK":17.0,"OR":13.0,"PA":13.0,"RI":11.0,"SC":15.5,"SD":11.0,"TN":16.0,"TX":15.0,"UT":7.0,"VA":10.0,"VT":9.5,"WA":11.5,"WI":10.5,"WV":18.0,"WY":11.5}},
"Obesity Women":{unit:"%",good:false,data:{"AK":33.5,"AR":41.5,"AL":41.0,"AZ":31.5,"CT":28.5,"CA":28.5,"CO":27.0,"DE":36.5,"FL":31.5,"GA":37.0,"HI":26.0,"IA":36.0,"ID":31.5,"IL":34.0,"IN":38.5,"KS":36.5,"KY":40.5,"LA":41.9,"MA":27.0,"MD":33.0,"ME":32.5,"MI":36.5,"MN":30.0,"MO":38.0,"MS":42.5,"MT":30.5,"NC":35.5,"ND":35.5,"NE":34.5,"NH":30.0,"NJ":29.0,"NM":33.0,"NV":31.5,"NY":30.5,"OH":37.5,"OK":40.5,"OR":31.5,"PA":34.5,"RI":33.5,"SC":38.0,"SD":35.0,"TN":41.5,"TX":37.5,"UT":26.5,"VA":31.5,"VT":30.0,"WA":30.0,"WI":34.0,"WV":43.0,"WY":34.0}},
"Smoking Women":{unit:"%",good:false,data:{"AK":18.0,"AR":22.5,"AL":20.5,"AZ":13.0,"CT":12.5,"CA":8.5,"CO":12.5,"DE":17.0,"FL":15.0,"GA":15.5,"HI":10.0,"IA":17.0,"ID":14.5,"IL":15.0,"IN":20.5,"KS":17.5,"KY":24.5,"LA":13.7,"MA":9.5,"MD":12.5,"ME":16.5,"MI":18.0,"MN":13.5,"MO":21.0,"MS":22.5,"MT":18.5,"NC":17.5,"ND":18.0,"NE":14.5,"NH":14.5,"NJ":10.5,"NM":16.0,"NV":17.0,"NY":13.5,"OH":19.5,"OK":21.5,"OR":15.0,"PA":17.5,"RI":15.0,"SC":19.0,"SD":17.5,"TN":23.0,"TX":13.0,"UT":7.5,"VA":14.0,"VT":15.5,"WA":13.5,"WI":17.0,"WV":28.0,"WY":18.0}},
"Drug Deaths Women":{unit:"per 100,000",good:false,data:{"AK":18.5,"AR":25.0,"AL":22.0,"AZ":22.5,"CT":31.0,"CA":11.5,"CO":17.0,"DE":38.0,"FL":23.5,"GA":16.0,"HI":7.5,"IA":10.5,"ID":15.5,"IL":20.0,"IN":27.0,"KS":13.5,"KY":38.5,"LA":50.2,"MA":29.5,"MD":39.0,"ME":32.5,"MI":24.0,"MN":14.0,"MO":28.5,"MS":16.0,"MT":15.0,"NC":22.0,"ND":8.0,"NE":10.0,"NH":27.5,"NJ":22.0,"NM":30.0,"NV":22.5,"NY":23.5,"OH":38.5,"OK":23.5,"OR":22.5,"PA":33.5,"RI":30.0,"SC":23.0,"SD":9.5,"TN":32.0,"TX":12.0,"UT":18.5,"VA":17.0,"VT":28.0,"WA":19.5,"WI":18.5,"WV":55.0,"WY":15.5}},
"Firearm Deaths Children":{unit:"per 100,000",good:false,data:{"AK":9.5,"AR":14.5,"AL":14.5,"AZ":8.0,"CT":3.0,"CA":4.5,"CO":5.5,"DE":7.0,"FL":8.5,"GA":12.5,"HI":1.5,"IA":5.5,"ID":7.0,"IL":10.0,"IN":10.0,"KS":7.0,"KY":10.5,"LA":16.1,"MA":1.8,"MD":9.5,"ME":4.0,"MI":8.5,"MN":3.5,"MO":12.0,"MS":18.0,"MT":8.5,"NC":9.5,"ND":5.0,"NE":5.5,"NH":2.5,"NJ":3.0,"NM":12.0,"NV":8.0,"NY":4.5,"OH":9.0,"OK":14.0,"OR":6.5,"PA":8.5,"RI":3.0,"SC":12.0,"SD":7.0,"TN":13.0,"TX":10.5,"UT":5.5,"VA":6.0,"VT":3.5,"WA":5.5,"WI":6.0,"WV":13.5,"WY":9.0}},
"Uninsured Women":{unit:"%",good:false,data:{"AK":16.5,"AR":13.0,"AL":15.0,"AZ":14.0,"CT":7.0,"CA":8.5,"CO":9.5,"DE":7.5,"FL":16.5,"GA":16.5,"HI":5.0,"IA":6.5,"ID":16.5,"IL":8.5,"IN":10.0,"KS":10.5,"KY":7.0,"LA":8.6,"MA":3.5,"MD":6.0,"ME":8.5,"MI":8.0,"MN":5.5,"MO":10.5,"MS":18.0,"MT":14.5,"NC":15.5,"ND":8.0,"NE":8.5,"NH":7.5,"NJ":8.0,"NM":16.5,"NV":16.0,"NY":8.0,"OH":9.0,"OK":20.5,"OR":9.0,"PA":7.5,"RI":6.0,"SC":16.5,"SD":14.5,"TN":11.5,"TX":23.5,"UT":9.5,"VA":9.0,"VT":5.5,"WA":8.5,"WI":7.0,"WV":9.5,"WY":16.5}},
"Uninsured Children":{unit:"%",good:false,data:{"AK":9.5,"AR":6.5,"AL":6.5,"AZ":7.5,"CT":3.0,"CA":4.0,"CO":4.5,"DE":3.5,"FL":9.5,"GA":8.5,"HI":2.5,"IA":3.5,"ID":8.5,"IL":4.5,"IN":5.0,"KS":5.5,"KY":3.5,"LA":4.3,"MA":1.5,"MD":2.5,"ME":4.0,"MI":4.5,"MN":2.5,"MO":5.5,"MS":10.0,"MT":8.0,"NC":7.5,"ND":3.5,"NE":4.5,"NH":4.0,"NJ":4.0,"NM":7.5,"NV":8.5,"NY":3.5,"OH":4.5,"OK":12.5,"OR":4.5,"PA":4.0,"RI":3.0,"SC":9.0,"SD":7.5,"TN":5.5,"TX":14.5,"UT":4.0,"VA":4.5,"VT":2.5,"WA":4.5,"WI":3.5,"WV":5.0,"WY":9.5}},
"Well Woman Visit":{unit:"%",good:true,data:{"AK":61.0,"AR":57.0,"AL":59.5,"AZ":64.5,"CT":72.5,"CA":70.0,"CO":73.5,"DE":72.0,"FL":66.0,"GA":65.5,"HI":72.0,"IA":69.0,"ID":64.0,"IL":69.5,"IN":67.0,"KS":66.5,"KY":64.5,"LA":80.3,"MA":78.5,"MD":75.5,"ME":71.0,"MI":69.5,"MN":75.0,"MO":66.5,"MS":58.5,"MT":63.5,"NC":68.0,"ND":66.5,"NE":68.5,"NH":76.5,"NJ":76.0,"NM":60.5,"NV":60.5,"NY":73.5,"OH":68.5,"OK":59.0,"OR":70.5,"PA":70.0,"RI":73.0,"SC":63.5,"SD":65.5,"TN":63.5,"TX":60.5,"UT":71.5,"VA":70.5,"VT":76.0,"WA":71.5,"WI":70.5,"WV":59.5,"WY":60.5}},
"Breastfeeding Initiation":{unit:"%",good:true,data:{"AK":83.5,"AR":65.0,"AL":67.5,"AZ":83.5,"CT":88.5,"CA":90.5,"CO":91.5,"DE":80.5,"FL":80.5,"GA":76.5,"HI":90.5,"IA":79.5,"ID":84.0,"IL":82.0,"IN":73.0,"KS":79.5,"KY":68.5,"LA":71.1,"MA":88.0,"MD":86.5,"ME":82.5,"MI":77.5,"MN":87.5,"MO":74.0,"MS":65.5,"MT":82.5,"NC":79.5,"ND":80.0,"NE":81.5,"NH":89.5,"NJ":88.0,"NM":78.0,"NV":78.0,"NY":85.5,"OH":73.5,"OK":68.5,"OR":89.5,"PA":77.5,"RI":84.5,"SC":73.5,"SD":78.5,"TN":68.5,"TX":78.5,"UT":89.0,"VA":83.5,"VT":88.0,"WA":90.5,"WI":83.0,"WV":63.5,"WY":79.5}},
"Teen Suicide":{unit:"per 100,000",good:false,data:{"AK":28.5,"AR":14.0,"AL":13.5,"AZ":14.5,"CT":6.5,"CA":5.5,"CO":14.5,"DE":8.5,"FL":9.5,"GA":11.5,"HI":8.0,"IA":11.0,"ID":18.5,"IL":7.5,"IN":13.0,"KS":13.5,"KY":15.5,"LA":10.7,"MA":5.5,"MD":7.5,"ME":14.0,"MI":9.5,"MN":9.0,"MO":14.5,"MS":14.5,"MT":27.5,"NC":10.5,"ND":18.0,"NE":13.5,"NH":11.0,"NJ":5.0,"NM":21.0,"NV":20.5,"NY":5.5,"OH":11.5,"OK":18.5,"OR":19.5,"PA":9.5,"RI":6.5,"SC":13.5,"SD":22.0,"TN":14.0,"TX":11.5,"UT":22.0,"VA":9.0,"VT":14.5,"WA":14.0,"WI":11.0,"WV":18.5,"WY":31.0}},
"Adequate Prenatal Care":{unit:"%",good:true,data:{"AK":72.0,"AR":64.5,"AL":69.5,"AZ":77.5,"CT":87.5,"CA":82.5,"CO":79.5,"DE":80.5,"FL":79.5,"GA":74.5,"HI":83.5,"IA":80.5,"ID":75.5,"IL":77.0,"IN":72.5,"KS":77.5,"KY":73.5,"LA":75.1,"MA":88.5,"MD":82.5,"ME":79.5,"MI":74.5,"MN":84.5,"MO":72.5,"MS":66.5,"MT":74.5,"NC":76.0,"ND":81.5,"NE":80.0,"NH":88.0,"NJ":85.5,"NM":71.5,"NV":73.0,"NY":83.5,"OH":74.5,"OK":68.5,"OR":79.5,"PA":78.5,"RI":83.5,"SC":72.0,"SD":80.0,"TN":71.0,"TX":74.0,"UT":83.5,"VA":81.0,"VT":85.5,"WA":84.0,"WI":80.5,"WV":67.5,"WY":75.0}}},
equity:{"Infant Mortality":{"Black":{nat:11.05,la:11.0},"White":{nat:4.52,la:5.2},"Hispanic":{nat:5.44,la:4.6},"Asian":{nat:4.04,la:null},"Amer Indian":{nat:10.24,la:null}},
"Children in Poverty":{"Black":{nat:32.5,la:42.0},"White":{nat:11.5,la:14.5},"Hispanic":{nat:25.0,la:28.5},"Asian":{nat:9.5,la:null}},
"Teen Births":{"Black":{nat:26.0,la:31.5},"White":{nat:11.5,la:16.5},"Hispanic":{nat:24.0,la:20.0}},
"Low Birth Weight":{"Black":{nat:14.0,la:15.2},"White":{nat:7.0,la:8.5},"Hispanic":{nat:7.2,la:7.8}}}
};

// Color helpers â€” light-theme friendly
function getScoreColor(s){
  if(s>0.3)return'#1a7f5a';
  if(s>0)return'#1e40af';
  if(s>-0.3)return'#d97706';
  return'#dc2626';
}
function getScoreBg(s){
  if(s>0.3)return'rgba(26,127,90,0.18)';
  if(s>0)return'rgba(30,64,175,0.15)';
  if(s>-0.3)return'rgba(217,119,6,0.18)';
  return'rgba(220,38,38,0.18)';
}

function showPage(id,el){
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
  document.querySelectorAll('.nav-tab').forEach(t=>t.classList.remove('active'));
  document.getElementById('page-'+id).classList.add('active');
  if(el)el.classList.add('active');
  if(id==='rankings'){setTimeout(()=>{updateRankings();updateRadar();},100);}
  if(id==='indicators'){setTimeout(updateIndicator,100);}
  if(id==='equity'){setTimeout(buildEquity,100);}
  if(id==='spotlight'){setTimeout(buildSpotlight,100);}
  if(id==='quadrant'){setTimeout(buildQuadrant,100);}
}

function buildOverview(){
  // Regional chart
  new Chart(document.getElementById('regionChart'),{
    type:'bar',
    data:{
      labels:['Northeast','Midwest','West','South'],
      datasets:[{
        label:'Avg Composite Score',
        data:[0.425,0.092,0.060,-0.329],
        backgroundColor:['rgba(26,127,90,0.75)','rgba(30,64,175,0.70)','rgba(91,33,182,0.65)','rgba(220,38,38,0.70)'],
        borderColor:['#1a7f5a','#1e40af','#5b21b6','#dc2626'],
        borderWidth:1.5,borderRadius:8,borderSkipped:false
      }]
    },
    options:{
      responsive:true,
      plugins:{
        legend:{display:false},
        tooltip:{callbacks:{label:c=>{
          const v=c.parsed.y;
          const txt=v>0?`+${v.toFixed(3)} (above avg)`:v===0?'0.000 (exactly average)':`${v.toFixed(3)} (below avg)`;
          return` Score: ${txt}`;
        }}}
      },
      scales:{
        y:{grid:{color:'#eaecf5'},ticks:{callback:v=>v.toFixed(2)},title:{display:true,text:'â† Below Avg  |  Above Avg â†’',color:'#9ca3af',font:{size:10}}},
        x:{grid:{display:false}}
      }
    }
  });

  // Distribution chart
  const sorted=Object.entries(DATA.overall).sort((a,b)=>a[1].rank-b[1].rank);
  new Chart(document.getElementById('distChart'),{
    type:'bar',
    data:{
      labels:sorted.map(([s])=>s),
      datasets:[{
        label:'Score',
        data:sorted.map(([,d])=>d.score),
        backgroundColor:sorted.map(([s,d])=>s==='LA'?'rgba(217,119,6,0.90)':getScoreBg(d.score)),
        borderColor:sorted.map(([s,d])=>s==='LA'?'#d97706':getScoreColor(d.score)),
        borderWidth:sorted.map(([s])=>s==='LA'?2:1),
        borderRadius:3
      }]
    },
    options:{
      responsive:true,
      plugins:{
        legend:{display:false},
        tooltip:{callbacks:{label:c=>{
          const v=c.parsed.y;
          return` ${DATA.stateNames[c.label]}: ${v>0?'+':''}${v.toFixed(3)} (Rank ${DATA.overall[c.label]?.rank}/50)`;
        }}}
      },
      scales:{
        y:{grid:{color:'#eaecf5'},ticks:{callback:v=>v.toFixed(1)}},
        x:{grid:{display:false},ticks:{font:{size:9}}}
      }
    }
  });

  // State map
  const map=document.getElementById('stateMap');
  sorted.forEach(([st,d])=>{
    const cell=document.createElement('div');
    cell.className='state-cell';
    cell.textContent=st;
    const p=d.rank/50;
    const r=Math.round(p*220+(1-p)*26);
    const g=Math.round(p*38+(1-p)*127);
    const bv=Math.round(p*38+(1-p)*90);
    cell.style.background=`rgba(${r},${g},${bv},0.85)`;
    cell.style.color=p>0.4?'#fff':'#fff';
    cell.title=`${DATA.stateNames[st]} | Rank: ${d.rank}/50 | Score: ${d.score>0?'+':''}${d.score.toFixed(3)}`;
    map.appendChild(cell);
  });

  // Tables
  const top10=sorted.slice(0,10);
  const bot10=sorted.slice(-10).reverse();
  function rankCls(r){return r<=10?'r-top':r<=25?'r-mid':r<=40?'r-low':'r-bot';}
  function rows(arr){return arr.map(([s,d])=>`<tr><td><span class="rank-badge ${rankCls(d.rank)}">${d.rank}</span></td><td style="font-weight:600">${s}</td><td class="text-secondary">${DATA.stateNames[s]}</td><td class="${d.score>=0?'score-pos':'score-neg'}">${d.score>0?'+':''}${d.score.toFixed(3)}</td></tr>`).join('');}
  const thead=`<thead><tr><th>Rank</th><th>ST</th><th>State</th><th>Score</th></tr></thead>`;
  document.getElementById('topStatesTable').innerHTML=`<table class="data-table">${thead}<tbody>${rows(top10)}</tbody></table>`;
  document.getElementById('bottomStatesTable').innerHTML=`<table class="data-table">${thead}<tbody>${rows(bot10)}</tbody></table>`;
}

let rankChart,radChart;
function updateRankings(){
  const domain=document.getElementById('domainSelect').value;
  const region=document.getElementById('regionFilter').value;
  document.getElementById('rankingsChartLabel').textContent=`State Rankings â€” ${domain}`;
  let data;
  if(domain==='Overall'){
    data=Object.entries(DATA.overall).map(([s,d])=>({s,score:d.score,rank:d.rank}));
  } else {
    const vals=Object.entries(DATA.domains[domain]);
    data=vals.map(([s,score])=>({s,score,rank:0}));
    data.sort((a,b)=>b.score-a.score);
    data.forEach((d,i)=>d.rank=i+1);
  }
  if(region!=='all')data=data.filter(d=>DATA.regions[d.s]===region);
  data.sort((a,b)=>b.score-a.score);
  const canvas=document.getElementById('rankingsChart');
  canvas.style.height=Math.max(500,data.length*22)+'px';
  if(rankChart)rankChart.destroy();
  rankChart=new Chart(canvas,{
    type:'bar',
    data:{
      labels:data.map(d=>`${d.s} â€” ${DATA.stateNames[d.s]}`),
      datasets:[{
        label:domain,
        data:data.map(d=>d.score),
        backgroundColor:data.map(d=>d.s==='LA'?'rgba(217,119,6,0.90)':getScoreBg(d.score)),
        borderColor:data.map(d=>d.s==='LA'?'#d97706':getScoreColor(d.score)),
        borderWidth:data.map(d=>d.s==='LA'?2:1),
        borderRadius:4
      }]
    },
    options:{
      indexAxis:'y',responsive:true,maintainAspectRatio:false,
      plugins:{
        legend:{display:false},
        tooltip:{callbacks:{label:c=>`  Score: ${c.parsed.x>0?'+':''}${c.parsed.x.toFixed(3)}`}}
      },
      scales:{
        x:{grid:{color:'#eaecf5'},ticks:{callback:v=>v.toFixed(1)},title:{display:true,text:'â† Worse than avg  |  Better than avg â†’',color:'#9ca3af',font:{size:10}}},
        y:{grid:{display:false},ticks:{font:{size:10}}}
      }
    }
  });
}

function updateRadar(){
  const s1=document.getElementById('stateCompare1').value;
  const s2=document.getElementById('stateCompare2').value;
  const dk=['Health Outcomes','Clinical Care','Social & Economic','Behaviors','Physical Environment'];
  function getV(s){
    if(s==='US')return dk.map(d=>{const v=Object.values(DATA.domains[d]);return v.reduce((a,b)=>a+b,0)/v.length;});
    return dk.map(d=>DATA.domains[d][s]||0);
  }
  if(radChart)radChart.destroy();
  radChart=new Chart(document.getElementById('radarChart'),{
    type:'radar',
    data:{
      labels:dk,
      datasets:[
        {label:DATA.stateNames[s1]||s1,data:getV(s1),backgroundColor:'rgba(217,119,6,0.12)',borderColor:'#d97706',pointBackgroundColor:'#d97706',pointRadius:4,borderWidth:2},
        {label:s2==='US'?'National Average':DATA.stateNames[s2],data:getV(s2),backgroundColor:'rgba(11,114,133,0.10)',borderColor:'#0b7285',pointBackgroundColor:'#0b7285',pointRadius:4,borderDash:[4,4],borderWidth:1.5}
      ]
    },
    options:{
      responsive:true,
      plugins:{legend:{labels:{boxWidth:10,font:{size:11}}}},
      scales:{r:{grid:{color:'#dde2ef'},angleLines:{color:'#dde2ef'},ticks:{display:false,backdropColor:'transparent'},pointLabels:{font:{size:10},color:'#374151'}}}
    }
  });
  const v1=getV(s1),v2=getV(s2);
  document.getElementById('radarStats').innerHTML=`
    <div style="font-size:11px;color:var(--text-3);margin-bottom:6px;">Positive gap = ${s1} outperforms ${s2==='US'?'national avg':s2} in that domain. Negative = underperforms.</div>
    <table class="data-table"><thead><tr><th>Domain</th><th>${s1}</th><th>${s2==='US'?'Nat Avg':s2}</th><th>Gap</th></tr></thead>
    <tbody>${dk.map((d,i)=>{const gap=v1[i]-v2[i];return`<tr><td class="text-sm">${d}</td><td class="${v1[i]>=0?'score-pos':'score-neg'}">${v1[i]>0?'+':''}${v1[i].toFixed(3)}</td><td class="${v2[i]>=0?'score-pos':'score-neg'}">${v2[i]>0?'+':''}${v2[i].toFixed(3)}</td><td style="color:${gap>=0?'var(--green)':'var(--red-mid)'};font-weight:600">${gap>0?'+':''}${gap.toFixed(3)}</td></tr>`;}).join('')}</tbody></table>`;
}

let indChart;
function updateIndicator(){
  const name=document.getElementById('indicatorSelect').value;
  const ind=DATA.indicators[name];if(!ind)return;
  document.getElementById('indicatorChartTitle').textContent=`${name} â€” All 50 States`;
  const entries=Object.entries(ind.data);
  entries.sort((a,b)=>ind.good?b[1]-a[1]:a[1]-b[1]);
  const vals=entries.map(([,v])=>v);
  const avg=vals.reduce((a,b)=>a+b,0)/vals.length;
  document.getElementById('indicatorNatAvg').innerHTML=`<span class="unit-tag">National Avg: ${avg.toFixed(1)} ${ind.unit}</span>`;
  if(indChart)indChart.destroy();
  indChart=new Chart(document.getElementById('indicatorChart'),{
    type:'bar',
    data:{
      labels:entries.map(([s])=>s),
      datasets:[
        {label:name,data:entries.map(([,v])=>v),backgroundColor:entries.map(([s])=>s==='LA'?'rgba(217,119,6,0.88)':'rgba(30,64,175,0.55)'),borderColor:entries.map(([s])=>s==='LA'?'#d97706':'#2563eb'),borderWidth:entries.map(([s])=>s==='LA'?2:1),borderRadius:3},
        {label:'National Average',data:entries.map(()=>avg),type:'line',borderColor:'rgba(11,114,133,0.9)',borderWidth:2,borderDash:[5,4],pointRadius:0,fill:false}
      ]
    },
    options:{
      responsive:true,
      plugins:{
        legend:{labels:{boxWidth:10}},
        tooltip:{callbacks:{label:c=>` ${c.dataset.label}: ${typeof c.parsed.y==='number'?c.parsed.y.toFixed(1):''} ${ind.unit}`}}
      },
      scales:{
        y:{grid:{color:'#eaecf5'},title:{display:true,text:ind.unit,color:'#9ca3af',font:{size:10}}},
        x:{grid:{display:false},ticks:{font:{size:9}}}
      }
    }
  });

  const sv=[...vals].sort((a,b)=>a-b);
  const std=Math.sqrt(vals.map(v=>(v-avg)**2).reduce((a,b)=>a+b,0)/vals.length);
  const laVal=ind.data['LA'];
  const diff=laVal!=null?laVal-avg:null;
  const isBetter=ind.good?(diff>0):(diff<0);
  document.getElementById('indicatorStats').innerHTML=`
    <div class="bar-row"><div class="bar-label">National Average</div><div class="bar-val">${avg.toFixed(1)}</div></div>
    <div class="bar-row"><div class="bar-label">Std Deviation (spread)</div><div class="bar-val">Â±${std.toFixed(1)}</div></div>
    <div class="bar-row"><div class="bar-label">Best value (${ind.good?'highest':'lowest'})</div><div class="bar-val" style="color:var(--green)">${sv[ind.good?sv.length-1:0].toFixed(1)}</div></div>
    <div class="bar-row"><div class="bar-label">Worst value (${ind.good?'lowest':'highest'})</div><div class="bar-val" style="color:var(--red-mid)">${sv[ind.good?0:sv.length-1].toFixed(1)}</div></div>
    <div class="bar-row"><div class="bar-label" style="font-weight:600">Louisiana</div><div class="bar-val" style="color:var(--amber-mid)">${laVal!=null?laVal.toFixed(1):'N/A'}</div></div>
    <div class="bar-row"><div class="bar-label">LA vs National Avg</div><div class="bar-val" style="color:${diff!=null?(isBetter?'var(--green)':'var(--red-mid)'):'var(--text-3)'}">${diff!=null?(diff>0?'+':'')+diff.toFixed(1)+' '+ind.unit:'N/A'}</div></div>`;

  const best=entries.slice(0,5);
  const worst=entries.slice(-5).reverse();
  document.getElementById('indicatorBest').innerHTML=best.map(([s,v],i)=>`<div class="bar-row"><div class="bar-label"><span class="rank-badge r-top" style="width:20px;height:20px;font-size:10px">${i+1}</span> ${s} â€” ${DATA.stateNames[s]}</div><div class="bar-val" style="color:var(--green)">${v.toFixed(1)}</div></div>`).join('');
  document.getElementById('indicatorWorst').innerHTML=worst.map(([s,v],i)=>`<div class="bar-row"><div class="bar-label"><span class="rank-badge r-bot" style="width:20px;height:20px;font-size:10px">${50-i}</span> ${s} â€” ${DATA.stateNames[s]}</div><div class="bar-val" style="color:var(--red-mid)">${v.toFixed(1)}</div></div>`).join('');
}

function buildEquity(){
  const colors=['rgba(220,38,38,0.72)','rgba(30,64,175,0.70)','rgba(91,33,182,0.65)','rgba(11,114,133,0.70)','rgba(217,119,6,0.70)'];
  const bc=['#dc2626','#1e40af','#5b21b6','#0b7285','#d97706'];
  function makeChart(id,data){
    const races=Object.keys(data);
    new Chart(document.getElementById(id),{
      type:'bar',
      data:{
        labels:races,
        datasets:[
          {label:'National Avg',data:races.map(r=>data[r].nat),backgroundColor:colors,borderColor:bc,borderWidth:1.5,borderRadius:5},
          {label:'Louisiana',data:races.map(r=>data[r].la),backgroundColor:races.map(()=>'rgba(217,119,6,0.30)'),borderColor:races.map(()=>'#d97706'),borderWidth:2,borderRadius:5}
        ]
      },
      options:{
        responsive:true,
        plugins:{legend:{labels:{boxWidth:10}}},
        scales:{y:{grid:{color:'#eaecf5'}},x:{grid:{display:false}}}
      }
    });
  }
  makeChart('equityRaceChart',DATA.equity['Infant Mortality']);
  makeChart('equityPovertyChart',DATA.equity['Children in Poverty']);
  makeChart('equityTeenChart',DATA.equity['Teen Births']);

  const gapData=[{s:'MA',b:7.2,w:3.1},{s:'MN',b:8.5,w:3.8},{s:'WI',b:14.0,w:4.2},{s:'IL',b:13.2,w:4.5},{s:'OH',b:13.5,w:5.2},{s:'GA',b:12.8,w:5.5},{s:'MS',b:13.0,w:6.8},{s:'AL',b:12.5,w:6.5},{s:'LA',b:11.0,w:5.2},{s:'TX',b:11.2,w:4.8}];
  new Chart(document.getElementById('equityGapChart'),{
    type:'bar',
    data:{
      labels:gapData.map(d=>d.s),
      datasets:[
        {label:'Black infant mortality',data:gapData.map(d=>d.b),backgroundColor:'rgba(220,38,38,0.70)',borderColor:'#dc2626',borderWidth:1,borderRadius:4},
        {label:'White infant mortality',data:gapData.map(d=>d.w),backgroundColor:'rgba(30,64,175,0.65)',borderColor:'#1e40af',borderWidth:1,borderRadius:4}
      ]
    },
    options:{
      responsive:true,
      plugins:{legend:{labels:{boxWidth:10}}},
      scales:{y:{grid:{color:'#eaecf5'},title:{display:true,text:'per 1,000 births',color:'#9ca3af',font:{size:10}}},x:{grid:{display:false}}}
    }
  });

  let html=`<table class="data-table"><thead><tr><th>Metric</th><th>Race/Ethnicity</th><th>National Avg</th><th>Louisiana</th><th>LA vs National</th><th>What it means</th></tr></thead><tbody>`;
  Object.entries(DATA.equity).forEach(([metric,groups])=>{
    Object.entries(groups).forEach(([race,vals])=>{
      if(vals.la===null)return;
      const diff=vals.la-vals.nat;
      const isBad=!metric.includes('Visit')&&!metric.includes('Breast');
      const worse=isBad?(diff>0):(diff<0);
      const meaning=worse?`Louisiana is ${Math.abs(diff).toFixed(1)} worse than national for ${race}`:`Louisiana is ${Math.abs(diff).toFixed(1)} better than national for ${race}`;
      html+=`<tr><td class="text-sm">${metric}</td><td style="font-size:11px;font-weight:600">${race}</td><td>${vals.nat.toFixed(1)}</td><td style="color:var(--amber-mid);font-weight:600">${vals.la.toFixed(1)}</td><td style="color:${worse?'var(--red-mid)':'var(--green)'};font-weight:600">${diff>0?'+':''}${diff.toFixed(1)}</td><td style="font-size:11px;color:var(--text-3)">${meaning}</td></tr>`;
    });
  });
  html+='</tbody></table>';
  document.getElementById('equitySummaryTable').innerHTML=html;
}

function buildSpotlight(){
  const dk=['Health Outcomes','Clinical Care','Social & Economic','Behaviors','Physical Environment'];
  new Chart(document.getElementById('laRadarChart'),{
    type:'radar',
    data:{
      labels:dk,
      datasets:[
        {label:'Louisiana',data:[-1.210,0.289,-1.044,-1.188,-0.579],backgroundColor:'rgba(217,119,6,0.12)',borderColor:'#d97706',pointBackgroundColor:'#d97706',pointRadius:5,borderWidth:2},
        {label:'National Average',data:[-0.141,0.207,0.019,-0.024,0.120],backgroundColor:'rgba(30,64,175,0.08)',borderColor:'rgba(30,64,175,0.7)',borderDash:[4,4],pointRadius:3,borderWidth:1.5},
        {label:'Best State (MA)',data:[0.756,1.483,0.966,0.938,0.620],backgroundColor:'rgba(26,127,90,0.05)',borderColor:'rgba(26,127,90,0.4)',borderDash:[2,4],pointRadius:2,borderWidth:1}
      ]
    },
    options:{
      responsive:true,
      plugins:{legend:{labels:{boxWidth:10,font:{size:11}}}},
      scales:{r:{grid:{color:'#dde2ef'},angleLines:{color:'#dde2ef'},ticks:{display:false,backdropColor:'transparent'},min:-1.6,max:1.6,pointLabels:{font:{size:10},color:'#374151'}}}
    }
  });

  const zscores=[
    {n:'Health Outcomes',z:-2.35,c:'var(--red-mid)',label:'Extreme gap â€” worse than 98% of states'},
    {n:'Behaviors',z:-2.23,c:'var(--red-mid)',label:'Extreme gap â€” smoking, obesity, drug deaths'},
    {n:'Physical Environment',z:-2.35,c:'var(--red-mid)',label:'Extreme gap â€” air quality, housing, safety'},
    {n:'Social & Economic',z:-1.93,c:'var(--amber-mid)',label:'Significant gap â€” poverty, food insecurity'},
    {n:'Clinical Care',z:0.14,c:'var(--green)',label:'Above average â€” well-woman visits, insurance'}
  ];
  document.getElementById('laDomainBars').innerHTML=zscores.map(d=>`
    <div class="bar-row" style="margin-bottom:14px">
      <div class="bar-label" style="width:160px"><div style="font-size:12px;font-weight:600">${d.n}</div><div style="font-size:10px;color:var(--text-4)">${d.label}</div></div>
      <div class="bar-track"><div class="bar-fill" style="width:${Math.min(100,Math.abs(d.z)/3*100)}%;background:${d.c}"></div></div>
      <div class="bar-val" style="color:${d.c};width:65px">${d.z>0?'+':''}${d.z.toFixed(2)} SD</div>
    </div>`).join('');

  const gaps=[
    {n:'Overall Ranking',r:50,v:'Last in nation',note:''},
    {n:'Children in Poverty',r:49,v:'25.0% of children',note:'1 in 4 children live in poverty'},
    {n:'Low Birth Weight',r:49,v:'11.3% of births',note:'National avg: 7.7%'},
    {n:'Child Mortality',r:49,v:'48.9 per 100k',note:'Nearly 4Ã— the best state'},
    {n:'Breastfeeding Initiation',r:47,v:'71.1%',note:'National avg: ~82%'},
    {n:'Food Insecurity',r:47,v:'16.2% of households',note:'1 in 6 families'},
    {n:'Teen Births',r:48,v:'23.1 per 1,000',note:'Nearly 4Ã— NH rate'},
    {n:'Infant Mortality',r:48,v:'7.3 per 1,000 births',note:'National avg: 5.4'},
    {n:'Maternal Mortality',r:46,v:'40.7 per 100,000',note:'4Ã— the best states'},
    {n:'Obesity â€” Women',r:46,v:'41.9%',note:'Nearly 2 in 5 women'}
  ];
  const strengths=[
    {n:'Well-Woman Visit',r:1,v:'80.3%',note:'Best in the nation'},
    {n:'Cervical Cancer Screening',r:5,v:'57.7%',note:'Top 10% nationally'},
    {n:'Clinical Care â€” Children',r:23,v:'Score: +0.356',note:'Above national avg'},
    {n:'Teen Suicide Rate',r:17,v:'10.7 per 100,000',note:'Better than avg'},
    {n:'Uninsured Women',r:24,v:'8.6%',note:'Near national avg'},
    {n:'Uninsured Children',r:24,v:'4.3%',note:'Near national avg'}
  ];
  function rankCls(r){return r<=10?'r-top':r<=25?'r-mid':r<=40?'r-low':'r-bot';}
  document.getElementById('laCriticalGaps').innerHTML=gaps.map(g=>`
    <div class="flex items-center justify-between" style="padding:9px 0;border-bottom:1px solid var(--border)">
      <div>
        <div class="text-sm" style="font-weight:600">${g.n}</div>
        <div class="text-xs text-secondary">${g.v}${g.note?` â€” ${g.note}`:''}</div>
      </div>
      <span class="rank-badge r-bot">${g.r}</span>
    </div>`).join('');
  document.getElementById('laStrengths').innerHTML=strengths.map(g=>`
    <div class="flex items-center justify-between" style="padding:9px 0;border-bottom:1px solid var(--border)">
      <div>
        <div class="text-sm" style="font-weight:600">${g.n}</div>
        <div class="text-xs text-secondary">${g.v}${g.note?` â€” ${g.note}`:''}</div>
      </div>
      <span class="rank-badge ${rankCls(g.r)}">${g.r}</span>
    </div>`).join('');

  const south=['MD','VA','DE','NC','FL','GA','TX','SC','KY','TN','WV','AL','OK','AR','MS','LA'];
  const sd=south.map(s=>({s,score:DATA.overall[s]?.score||0})).sort((a,b)=>b.score-a.score);
  new Chart(document.getElementById('laSouthChart'),{
    type:'bar',
    data:{
      labels:sd.map(d=>`${d.s} â€” ${DATA.stateNames[d.s]}`),
      datasets:[{
        label:'Overall Score',
        data:sd.map(d=>d.score),
        backgroundColor:sd.map(d=>d.s==='LA'?'rgba(217,119,6,0.90)':getScoreBg(d.score)),
        borderColor:sd.map(d=>d.s==='LA'?'#d97706':getScoreColor(d.score)),
        borderWidth:sd.map(d=>d.s==='LA'?2:1),
        borderRadius:5
      }]
    },
    options:{
      indexAxis:'y',responsive:true,
      plugins:{legend:{display:false},tooltip:{callbacks:{label:c=>`  Score: ${c.parsed.x>0?'+':''}${c.parsed.x.toFixed(3)}`}}},
      scales:{
        x:{grid:{color:'#eaecf5'},ticks:{callback:v=>v.toFixed(1)},title:{display:true,text:'â† Worse  |  Better â†’',color:'#9ca3af',font:{size:10}}},
        y:{grid:{display:false},ticks:{font:{size:10}}}
      }
    }
  });
}

function buildQuadrant(){
  const pts=Object.entries(DATA.overall).map(([s,d])=>({x:d.score,y:51-d.rank,s,rank:d.rank}));
  new Chart(document.getElementById('scatterChart'),{
    type:'scatter',
    data:{
      datasets:[
        {label:'All Other States',data:pts.filter(p=>p.s!=='LA'),backgroundColor:pts.filter(p=>p.s!=='LA').map(p=>getScoreBg(p.x)),borderColor:pts.filter(p=>p.s!=='LA').map(p=>getScoreColor(p.x)),pointRadius:7,borderWidth:1.5},
        {label:'Louisiana â˜…',data:pts.filter(p=>p.s==='LA'),backgroundColor:'rgba(217,119,6,0.90)',borderColor:'#d97706',pointRadius:14,pointStyle:'star',borderWidth:2}
      ]
    },
    options:{
      responsive:true,
      plugins:{
        legend:{labels:{boxWidth:10}},
        tooltip:{callbacks:{label:c=>{const d=c.raw;return` ${d.s} â€” Rank: ${d.rank}/50 | Score: ${d.x>0?'+':''}${d.x.toFixed(3)}`;}}},
        annotation:{annotations:{line1:{type:'line',xMin:0,xMax:0,borderColor:'rgba(0,0,0,0.15)',borderWidth:1.5,borderDash:[4,4]}}}
      },
      scales:{
        x:{title:{display:true,text:'â† Worse than avg (negative)   |   Better than avg (positive) â†’',color:'#9ca3af',font:{size:10}},grid:{color:'#eaecf5'}},
        y:{title:{display:true,text:'Inverted Rank (higher = better rank)',color:'#9ca3af',font:{size:10}},grid:{color:'#eaecf5'}}
      }
    }
  });
}

document.addEventListener('DOMContentLoaded',()=>{
  buildOverview();
  const states=Object.keys(DATA.stateNames).sort();
  ['stateCompare1','stateCompare2'].forEach(id=>{
    const sel=document.getElementById(id);if(!sel)return;
    sel.innerHTML='';
    states.forEach(s=>{const o=document.createElement('option');o.value=s;o.textContent=`${s} â€” ${DATA.stateNames[s]}`;sel.appendChild(o);});
    const n=document.createElement('option');n.value='US';n.textContent='US â€” National Average';sel.appendChild(n);
  });
  document.getElementById('stateCompare1').value='LA';
  document.getElementById('stateCompare2').value='MA';
  updateIndicator();
});
</script>
</body>
</html>
